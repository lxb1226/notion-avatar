# PageSpeed æ€§èƒ½ä¼˜åŒ–æ€»ç»“

æœ¬æ–‡æ¡£æ€»ç»“äº†é’ˆå¯¹ PageSpeed å‘ç°çš„æ€§èƒ½é—®é¢˜æ‰€å®æ–½çš„ä¼˜åŒ–æªæ–½ã€‚

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

æ ¹æ® PageSpeed åˆ†æï¼Œä¸»è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š
1. è¯·æ±‚é˜»å¡ç½‘é¡µåˆå§‹æ¸²æŸ“ï¼Œå»¶è¿Ÿ LCP
2. ç¼“å­˜ç”Ÿå‘½å‘¨æœŸè¿‡çŸ­
3. ä¸å¿…è¦çš„ polyfill å’Œ transform
4. å¸ƒå±€åç§» (CLS) é—®é¢˜
5. LCP å›¾åƒåŠ è½½ä¼˜åŒ–
6. å…³é”®è¯·æ±‚é“¾ä¼˜åŒ–
7. å›¾åƒæ ¼å¼å’Œå‹ç¼©ä¼˜åŒ–

## âœ… å·²å®æ–½çš„ä¼˜åŒ–æªæ–½

### 1. å…³é”®èµ„æºåŠ è½½å’Œæ¸²æŸ“é˜»å¡ä¼˜åŒ–

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `src/pages/_document.tsx`
- `src/pages/index.tsx`
- `src/components/FontOptimizer.tsx`
- `src/styles/global.css`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… ä½¿ç”¨ `preload` + `onload` æŠ€æœ¯éé˜»å¡åŠ è½½ CSS
- âœ… æ·»åŠ  DNS prefetch å’Œ preconnect
- âœ… ä¼˜åŒ–å­—ä½“åŠ è½½ç­–ç•¥ï¼Œä½¿ç”¨ `font-display: swap`
- âœ… å®ç°æ¸è¿›å¼å­—ä½“åŠ è½½ï¼Œé¿å… FOIT/FOUT

### 2. ç¼“å­˜ç­–ç•¥ä¼˜åŒ–

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `next.config.js`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… é…ç½®é™æ€èµ„æºé•¿æœŸç¼“å­˜ (1å¹´)
- âœ… è®¾ç½®å­—ä½“æ–‡ä»¶ç¼“å­˜ç­–ç•¥
- âœ… ä¼˜åŒ–å›¾åƒç¼“å­˜é…ç½®
- âœ… æ·»åŠ å®‰å…¨å¤´éƒ¨

### 3. JavaScript æ„å»ºå’Œ Polyfill ä¼˜åŒ–

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `next.config.js`
- `.browserslistrc`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… é…ç½®ç°ä»£æµè§ˆå™¨ç›®æ ‡ï¼Œå‡å°‘ polyfill
- âœ… å¯ç”¨ SWC å‹ç¼©
- âœ… ä¼˜åŒ– webpack åˆ†åŒ…ç­–ç•¥
- âœ… å¯ç”¨ tree shaking

### 4. å¸ƒå±€åç§» (CLS) ä¿®å¤

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `src/pages/components/HeroSection/index.tsx`
- `src/pages/blog/index.tsx`
- `src/pages/blog/[slug].tsx`
- `src/pages/components/WhosUsing/index.tsx`
- `src/pages/components/ResourceStore/index.tsx`
- `src/pages/components/UseCases/SocialDemo.tsx`
- `src/pages/components/UseCases/ChatDemo.tsx`
- `src/pages/components/Modal/Share/index.tsx`
- `src/pages/components/Modal/AvatarPicker/index.tsx`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… å‡çº§åˆ°æ–°ç‰ˆ Next.js Image ç»„ä»¶
- âœ… ä¸ºæ‰€æœ‰å›¾åƒæ·»åŠ æ˜ç¡®çš„å°ºå¯¸å±æ€§
- âœ… ä½¿ç”¨ `fill` å’Œ `sizes` å±æ€§ä¼˜åŒ–å“åº”å¼å›¾åƒ
- âœ… æ·»åŠ  `style` å±æ€§ç¡®ä¿å°ºå¯¸ç¨³å®š

### 5. LCP å›¾åƒåŠ è½½ä¼˜åŒ–

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `src/pages/index.tsx`
- `src/pages/components/HeroSection/index.tsx`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… ä¸ºå…³é”®å›¾åƒæ·»åŠ  `preload` æ ‡ç­¾
- âœ… è®¾ç½®å…³é”®å›¾åƒçš„ `priority` å±æ€§
- âœ… ä¼˜åŒ–å›¾åƒåŠ è½½é¡ºåº

### 6. å…³é”®è¯·æ±‚é“¾ä¼˜åŒ–

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `src/components/ResourceOptimizer.tsx`
- `src/pages/_app.tsx`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… å®ç°æ™ºèƒ½èµ„æºé¢„åŠ è½½
- âœ… ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬åŠ è½½
- âœ… å»¶è¿Ÿéå…³é”®èµ„æºåŠ è½½

### 7. å›¾åƒä¼˜åŒ–å’Œæ ¼å¼è½¬æ¢

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `next.config.js`
- `src/components/ImageOptimizer.tsx`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… å¯ç”¨ WebP å’Œ AVIF æ ¼å¼æ”¯æŒ
- âœ… é…ç½®å“åº”å¼å›¾åƒå°ºå¯¸
- âœ… å®ç°ç°ä»£å›¾åƒæ ¼å¼æ£€æµ‹å’Œé¢„åŠ è½½
- âœ… ä¼˜åŒ–å›¾åƒå‹ç¼©è®¾ç½®

### 8. æ€§èƒ½ç›‘æ§å’Œæµ‹è¯•

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `src/components/PerformanceMonitor.tsx`
- `scripts/performance-test.js`
- `package.json`

**ä¼˜åŒ–å†…å®¹ï¼š**
- âœ… å®ç° Core Web Vitals ç›‘æ§
- âœ… æ·»åŠ æ€§èƒ½æŒ‡æ ‡æ”¶é›†å’ŒæŠ¥å‘Š
- âœ… åˆ›å»ºè‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯•è„šæœ¬
- âœ… é›†æˆ Google Analytics æ€§èƒ½è¿½è¸ª

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¼€å‘ç¯å¢ƒæµ‹è¯•
```bash
npm run dev
npm run perf-test
```

### ç”Ÿäº§æ„å»º
```bash
npm run build
npm run start
```

### æ€§èƒ½åˆ†æ
```bash
npm run analyze
```

## ğŸ“Š é¢„æœŸæ€§èƒ½æå‡

åŸºäºå®æ–½çš„ä¼˜åŒ–æªæ–½ï¼Œé¢„æœŸå¯ä»¥è·å¾—ä»¥ä¸‹æ€§èƒ½æå‡ï¼š

- **LCP (Largest Contentful Paint)**: å‡å°‘ 20-40%
- **FCP (First Contentful Paint)**: å‡å°‘ 15-30%
- **CLS (Cumulative Layout Shift)**: å‡å°‘ 80-95%
- **TTFB (Time to First Byte)**: é€šè¿‡ç¼“å­˜ä¼˜åŒ–å‡å°‘ 10-20%
- **æ€»ä½“ PageSpeed è¯„åˆ†**: æå‡ 15-25 åˆ†

## ğŸ”§ åç»­ä¼˜åŒ–å»ºè®®

1. **æœåŠ¡ç«¯ä¼˜åŒ–**
   - å®æ–½ CDN åˆ†å‘
   - å¯ç”¨ Brotli å‹ç¼©
   - ä¼˜åŒ–æœåŠ¡å™¨å“åº”æ—¶é—´

2. **å›¾åƒä¼˜åŒ–**
   - è½¬æ¢ç°æœ‰å›¾åƒä¸º WebP/AVIF æ ¼å¼
   - å®æ–½å“åº”å¼å›¾åƒ
   - ä½¿ç”¨å›¾åƒ CDN

3. **ä»£ç åˆ†å‰²**
   - å®æ–½è·¯ç”±çº§ä»£ç åˆ†å‰²
   - ä¼˜åŒ–ç¬¬ä¸‰æ–¹åº“åŠ è½½
   - å»¶è¿ŸåŠ è½½éå…³é”®ç»„ä»¶

4. **ç›‘æ§å’Œåˆ†æ**
   - è®¾ç½®æŒç»­æ€§èƒ½ç›‘æ§
   - å®æ–½ A/B æµ‹è¯•
   - å®šæœŸæ€§èƒ½å®¡è®¡

## ğŸ“ æ³¨æ„äº‹é¡¹

- æ‰€æœ‰ä¼˜åŒ–éƒ½ä¿æŒäº†å‘åå…¼å®¹æ€§
- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨äº†æ€§èƒ½ç›‘æ§
- å¼€å‘ç¯å¢ƒä¸­æä¾›äº†è¯¦ç»†çš„æ€§èƒ½æ—¥å¿—
- æ‰€æœ‰å›¾åƒç»„ä»¶éƒ½å·²æ›´æ–°ä¸ºæ–°çš„ Next.js Image API
